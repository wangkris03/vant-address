import{pushScopeId as t,popScopeId as e,resolveComponent as i,openBlock as a,createBlock as s,createVNode as n,createCommentVNode as l,withDirectives as h,Fragment as o,renderList as r,createTextVNode as c,toDisplayString as d,vShow as p,renderSlot as v,withScopeId as u}from"vue";var f={name:"vant-address",props:{debug:{type:Boolean,default:!1},title:{type:String,default:"请选择所在地区"},showNavBar:{type:Boolean,default:!0},level:{type:Number,default:4,validator:function(t){return t>0&&t<5}},data:{type:Array,default:()=>[]},params:{type:Object,require:!0},itemKey:{type:String,default:"title"},activeColor:{type:String,default:"rgb(135, 202, 204)"},navBarStyle:{type:Object,default:()=>{}},stepStyle:{type:Object,default:()=>{}},gridItemStyle:{type:Object,default:()=>{}},action:{type:Function,require:!0}},data:()=>({showSteps:!1,active:0,stepData:[],option:1,currentList:[],provinceList:[],cityList:[],districtList:[],streetList:[]}),mounted(){},watch:{},methods:{debugInfo(t,...e){this.debug&&console.log(t,...e)},async initAddress(){if(this.dataCheck=this.data.filter((t=>t.value)),0===this.dataCheck.length)return this.stepData=[],await this.setList(0,this.params),void(this.currentList=this.provinceList);if(this.data&&this.data.length>0)if(this.showSteps=!0,this.stepData=this.data,this.data.length===this.level){this.option=2,this.active=this.level-1;for(let t in this.stepData)this.stepData[t].value&&await this.setList(+t+1,{pid:this.stepData[t].value});this.onClickStep(this.level-1)}else{this.option=1;let t=this.stepData.length;this.stepData[t-1].flag&&(this.stepData.length=t-1,t=this.stepData.length);for(let t in this.stepData)this.stepData[t].value&&await this.setList(+t+1,{pid:this.stepData[t].value});let e=1===t?"请选择城市":2===t?"请选择区县":3===t?"请选择街道":"";if(e){let i={flag:"tip",title:e};this.stepData.push(i),this.active=t,this.onClickStep(t)}}},async onSelect(t){if(this.showSteps=!0,this.stepData=this.stepData.filter((t=>!t.flag)),1===this.option&&(this.stepData.push(t),this.debugInfo("新增",this.stepData,this.active,t)),2===this.option&&(this.stepData[this.active]=t,this.stepData.length=this.active+1,this.debugInfo("修改",this.stepData,this.active,t)),this.$emit("confirm",this.stepData),this.stepData.length>=this.level)this.debugInfo("选完结束"),this.option=2;else{this.currentList=[],this.option=1;let e=this.stepData.length,i=1===e?"请选择城市":2===e?"请选择区县":3===e?"请选择街道":"";if(i){let a={flag:"tip",title:i};this.active++,this.stepData.push(a),await this.setList(e,{pid:t.value}),this.onClickStep(e)}}},onClickStep(t){this.stepData[t].flag?this.option=1:this.option=2,this.active=t,0===t?this.currentList=this.provinceList:1===t?this.currentList=this.cityList:2===t?this.currentList=this.districtList:3===t&&(this.currentList=this.streetList)},async setList(t,e){try{const i=await this.action(e);this.debugInfo("setList",i),i&&(0===t&&(this.provinceList=i),1===t&&(this.cityList=i),2===t&&(this.districtList=i),3===t&&(this.streetList=i))}catch(t){this.debugInfo("error",t),this.currentList=[]}}}};const y=u("data-v-009c3baa");t("data-v-009c3baa");const g={class:"ad-container"},m={key:0,class:"modal-head"},b={class:"modal-des"},L={class:"modal-body"};e();const D=y(((t,e,u,f,D,S)=>{const C=i("van-nav-bar"),x=i("van-step"),k=i("van-steps"),w=i("van-grid-item"),_=i("van-grid");return a(),s("div",g,[u.showNavBar?(a(),s("div",m,[n(C,{style:u.navBarStyle,title:u.title},null,8,["style","title"])])):l("v-if",!0),h(n("div",b,[n(k,{direction:"vertical","active-color":u.activeColor,active:D.active,onClickStep:S.onClickStep},{default:y((()=>[(a(!0),s(o,null,r(D.stepData,((t,e)=>(a(),s(x,{style:u.stepStyle,key:e},{default:y((()=>[c(d(t[u.itemKey]),1)])),_:2},1032,["style"])))),128))])),_:1},8,["active-color","active","onClickStep"])],512),[[p,D.showSteps]]),n("div",L,[n(_,null,{default:y((()=>[(a(!0),s(o,null,r(D.currentList,((e,i)=>(a(),s(w,{key:i,text:e[u.itemKey],onClick:t=>S.onSelect(e)},{default:y((()=>[v(t.$slots,"default",{},(()=>[n("span",{class:"van-grid-item__text",style:u.gridItemStyle},d(e[u.itemKey]),5)]))])),_:2},1032,["text","onClick"])))),128))])),_:1})])])}));!function(t,e){void 0===e&&(e={});var i=e.insertAt;if(t&&"undefined"!=typeof document){var a=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===i&&a.firstChild?a.insertBefore(s,a.firstChild):a.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}}("\n.ad-container[data-v-009c3baa] {\r\n  height: 70vh;\r\n  display: flex;\r\n  flex-direction: column;\n}\n.modal-head[data-v-009c3baa] {\r\n  flex: 1;\n}\n.modal-des[data-v-009c3baa] {\r\n  flex: 1;\r\n  text-align: left;\n}\n.modal-body[data-v-009c3baa] {\r\n  flex: 100;\r\n  overflow: auto;\n}\n.van-step[data-v-009c3baa] {\r\n  font-size: 16px;\n}\n.van-step--vertical[data-v-009c3baa]:not(:last-child)::after {\r\n  border-bottom-width: 0px;\n}\r\n"),f.render=D,f.__scopeId="data-v-009c3baa",f.__file="src/address.vue",f.install=function(t){t.component(f.name,f)};export{f as default};
